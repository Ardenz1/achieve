import prisma from "@/database/client";

export async function PUT(request, { params }) {
  const { id, foodId } = params;
  console.log("Received id:", id);
  console.log("Received foodId:", foodId);

  try {
    const data = await request.json();
    console.log("Data received in PUT request:", data);

    // Update the food entry in the database
    const updatedFoodEntry = await prisma.foodEntry.update({
      where: { id: foodId},
      data: {
        mealName: data.mealName,
        calories: data.calories,
        carbs: data.carbs,
        protein: data.protein,
        fat: data.fat,
        fiber: data.fiber,
        sugar: data.sugar,
        sodium: data.sodium,
        units: data.units,
        amount: data.amount,
        servingSize: data.servingSize,
      },
    });

    if (!updatedFoodEntry) {
      return new Response(JSON.stringify({ error: "Food entry not found" }), { status: 404 });
    }
    return new Response(JSON.stringify(updatedFoodEntry), { status: 200 });
  } catch (error) {
    console.error("Error updating food entry:", error);
    return new Response(JSON.stringify({ error: "Internal server error." }), { status: 500 });
  }
}



// import prisma from "@/database/client";

// export async function PUT(request, { params }) {
//   const { id, foodId } = params;
//   console.log("Received id:", id);
//   console.log("Received foodId:", foodId);

//   try {
//     const data = await request.json();
//     console.log("Data received in PUT request:", data);

//     // Update the food entry in the database
//     const updatedFoodEntry = await prisma.foodEntry.update({
//       where: { id: parseInt(foodId)},
//       data: {
//         mealName: data.mealName,
//         calories: data.calories,
//         carbs: data.carbs,
//         protein: data.protein,
//         fat: data.fat,
//         fiber: data.fiber,
//         sugar: data.sugar,
//         sodium: data.sodium,
//         units: data.units,
//         amount: data.amount,
//         servingSize: data.servingSize,
//         // CalcCalories: data.CalcCalories,
//         // CalcCarbs: data.CalcCarbs,
//         // CalcProtein: data.CalcProtein,
//         // CalcFat: data.CalcFat,
//         // CalcFiber: data.CalcFiber,
//         // CalcSugar: data.CalcSugar,
//         // CalcSodium: data.CalcSodium,
//       },
//     });

//     if (!updatedFoodEntry) {
//       return new Response(JSON.stringify({ error: "Food entry not found" }), { status: 404 });
//     }
//     return new Response(JSON.stringify(updatedFoodEntry), { status: 200 });
//   } catch (error) {
//     console.error("Error updating food entry:", error);
//     return new Response(JSON.stringify({ error: "Internal server error." }), { status: 500 });
//   }
// }
